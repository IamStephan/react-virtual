!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactVirtual={},e.React)}(this,(function(e,t){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var n,a=["bottom","height","left","right","top","width"],i=new Map,o=function e(){var t=[];i.forEach((function(e,r){var n,i,o=r.getBoundingClientRect();n=o,i=e.rect,void 0===n&&(n={}),void 0===i&&(i={}),a.some((function(e){return n[e]!==i[e]}))&&(e.rect=o,t.push(e))})),t.forEach((function(e){e.callbacks.forEach((function(t){return t(e.rect)}))})),n=window.requestAnimationFrame(e)};var u="undefined"!=typeof window?t.useLayoutEffect:t.useEffect;function c(e){var r=t.useState(e.current),a=r[0],c=r[1],f=t.useReducer(s,null),l=f[0],d=f[1],v=t.useRef(!1);return u((function(){e.current!==a&&c(e.current)})),u((function(){if(a&&!v.current){v.current=!0;var e=a.getBoundingClientRect();d({rect:e})}}),[a]),t.useEffect((function(){if(a){var e,t,r=(e=a,t=function(e){d({rect:e})},{observe:function(){var r=0===i.size;i.has(e)?i.get(e).callbacks.push(t):i.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),r&&o()},unobserve:function(){var r=i.get(e);if(r){var a=r.callbacks.indexOf(t);a>=0&&r.callbacks.splice(a,1),r.callbacks.length||i.delete(e),i.size||cancelAnimationFrame(n)}}});return r.observe(),function(){r.unobserve()}}}),[a]),l}function s(e,t){var r=t.rect;return e&&e.height===r.height&&e.width===r.width?e:r}var f=function(){return 50};e.useVirtual=function(e){var n,a,i=e.size,o=void 0===i?0:i,s=e.estimateSize,l=void 0===s?f:s,d=e.overscan,v=void 0===d?0:d,h=e.paddingStart,p=void 0===h?0:h,m=e.paddingEnd,g=void 0===m?0:m,b=e.parentRef,O=e.horizontal,y=e.scrollToFn,z=e.useObserver,k=e.onScrollElement,w=e.scrollOffsetFn,R=O?"width":"height",S=O?"scrollLeft":"scrollTop",M=t.useRef({}),E=((z||c)(b)||((n={})[R]=0,n))[R],x=t.useCallback((function(e){b.current&&(b.current[S]=e)}),[b,S]),C=y||x;y=t.useCallback((function(e){C(e,x)}),[x,C]);var j=t.useState({}),F=j[0],A=j[1],L=t.useMemo((function(){for(var e=[],t=0;t<o;t++){var r=F[t],n=e[t-1]?e[t-1].end:p,a="number"==typeof r?r:l(t),i=n+a;e[t]={index:t,start:n,size:a,end:i}}return e}),[l,F,p,o]),T=((null==(a=L[o-1])?void 0:a.end)||0)+g;Object.assign(M.current,{overscan:v,measurements:L,outerSize:E,totalSize:T});var q=t.useState({start:0,end:0}),B=q[0],P=q[1],I=k?k.current:b.current;u((function(){if(I){var e=function(){var e=w?w():I[S];M.current.scrollOffset=e,P((function(e){return function(e,t){var r=e.overscan,n=e.measurements,a=e.outerSize,i=e.scrollOffset,o=n.length,u=o-1;for(;u>0&&n[u].end>=i;)u-=1;var c=0;for(;c<o-1&&n[c].start<=i+a;)c+=1;if(u=Math.max(u-r,0),c=Math.min(c+r,o-1),!t||Math.abs(u-t.start)>r-1||Math.abs(c-t.end)>r-1)return{start:u,end:c};return t}(M.current,e)}))};return e(),I.addEventListener("scroll",e,{capture:!1,passive:!0}),function(){I.removeEventListener("scroll",e)}}}),[I,S,o,E]);var V=t.useMemo((function(){for(var e=[],t=Math.min(B.end,L.length-1),n=function(t){var n=r(r({},L[t]),{},{measureRef:function(e){var a=M.current.scrollOffset;if(e){var i=e.getBoundingClientRect()[R];i!==n.size&&(n.start<a&&x(a+(i-n.size)),A((function(e){var n;return r(r({},e),{},((n={})[t]=i,n))})))}}});e.push(n)},a=B.start;a<=t;a++)n(a);return e}),[B.start,B.end,L,R,x]),_=t.useRef();u((function(){_.current&&(l||o)&&A({}),_.current=!0}),[l,o]);var D=t.useCallback((function(e,t){var r=(void 0===t?{}:t).align,n=void 0===r?"start":r,a=M.current,i=a.scrollOffset,o=a.outerSize;"auto"===n&&(n=e<=i?"start":i>=i+o?"end":"start"),"start"===n?y(e):"end"===n?y(e-o):"center"===n&&y(e-o/2)}),[y]),G=t.useCallback((function(e,t){var n=void 0===t?{}:t,a=n.align,i=void 0===a?"auto":a,u=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(n,["align"]),c=M.current,s=c.measurements,f=c.scrollOffset,l=c.outerSize,d=s[Math.max(0,Math.min(e,o-1))];if(d){if("auto"===i)if(d.end>=f+l)i="end";else{if(!(d.start<=f))return;i="start"}var v="center"===i?d.start+d.size/2:"end"===i?d.end:d.start;D(v,r({align:i},u))}}),[D,o]),H=t.useCallback((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];G.apply(void 0,t),requestAnimationFrame((function(){G.apply(void 0,t)}))}),[G]);return{virtualItems:V,totalSize:T,scrollToOffset:D,scrollToIndex:H}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=react-virtual.production.min.js.map
